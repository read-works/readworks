import{a as Xe}from"./chunk-AQBS2ZYB.js";import{a as je,b as Ye}from"./chunk-72JRBBZD.js";import{a as Ue}from"./chunk-O2ZDC4GV.js";import{a as qe,c as Qe,e as Ze}from"./chunk-IBIHUJR6.js";import{b as $e,c as Ke}from"./chunk-FZYSEXYG.js";import{b as Q,c as de}from"./chunk-G3MELPCC.js";import{a as Fe}from"./chunk-5ESBBNVT.js";import{a as Ve,b as ze}from"./chunk-PM5VPY4S.js";import{$ as Me,A as C,Ba as me,C as x,Ca as Ee,D as Pe,Da as te,Ea as ie,F as B,G as we,Ha as ae,Ia as $,Ja as Le,K as Oe,Ka as ne,L as F,M as V,N as p,O as z,R as Ie,Ra as ke,U,V as Ne,Wa as le,Z as N,aa as P,ca as y,fb as Ge,ga as T,gb as We,ha as Ae,ia as De,ja as be,ka as d,la as u,ma as b,mb as _e,na as Se,oa as fe,ob as he,pa as v,pb as ce,sa as L,t as ve,tb as Be,ub as j,w as R,wa as m,xa as S,xb as q,y as se,ya as xe,yb as He,z as E,za as ye}from"./chunk-V52KVE3Z.js";var _t=t=>[t];function ht(t,o){if(t&1){let e=v();d(0,"rw-word-bar",15),m("selected",function(n){E(e);let r=S();return C(r.updateFilterSettings(n));}),u();}if(t&2){let e=S();P("roundedTop",!0)("roundedBottom",!0)("interactive",!0)("searchMatches",e.searchMatches)("size","medium")("disabled",e.disabled)("initialSelections",e.initialFilter?ke(8,_t,e.initialFilter):void 0)("forceToHighlightSearchId",e.forceToHighlightSearchId);}}function ct(t,o){t&1&&(d(0,"span",6),L(1,0),u());}function dt(t,o){t&1&&(d(0,"span",6),L(1,1),u());}function ut(t,o){if(t&1&&(d(0,"span",7),$(1),d(2,"span",16),L(3,2),u()()),t&2){let e=S();p(),ne(" ",e.resultsFound," ");}}function gt(t,o){if(t&1){let e=v();d(0,"rw-button",17),m("clicked",function(){E(e);let n=S();return C(n.showAllPagesContainingMatches());}),u();}}function pt(t,o){if(t&1){let e=v();d(0,"rw-button",18),m("clicked",function(){E(e);let n=S();return C(n.setFilterOperator(!1));}),u();}}function St(t,o){if(t&1){let e=v();d(0,"rw-button",19),m("clicked",function(){E(e);let n=S();return C(n.setFilterOperator(!0));}),u();}}function ft(t,o){if(t&1){let e=v();d(0,"rw-button",20),m("clicked",function(){E(e);let n=S();return C(n.updateFilterSettings([]));}),u();}}var Je=(()=>{class t{searchService=R(Q);iaService=R(j);initialFilter;searchMatches;resultsFound=0;disabled=!1;iaLayer;forceToHighlightSearchId;filterSettingsChanged=new x();showResultDistribution=new x();resetFilters(){!this.iaLayer||!this.iaLayer.length||this.iaService.is(this.iaLayer)&&this.selections.length&&this.updateFilterSettings([]);}condense(){!this.iaLayer||!this.iaLayer.length||this.iaService.is(this.iaLayer)&&(this.selections.length||this.showAllPagesContainingMatches());}toggleFilterMode(){!this.iaLayer||!this.iaLayer.length||this.iaService.is(this.iaLayer)&&this.selections.length&&this.setFilterOperator(this.operator!=="and");}selections=[];operator="and";reset=!1;ngOnInit(){this.initialFilter&&this.selections.push(this.initialFilter);}ngOnChanges(e){this.initialFilter&&this.initialFilter!==this.selections[0]&&(this.selections.length=1,this.selections[0]=this.initialFilter,this.rerender()),!this.initialFilter&&e&&e.searchMatches&&e.searchMatches.currentValue&&e.searchMatches.previousValue&&e.searchMatches.currentValue.length<e.searchMatches.previousValue.length&&e.searchMatches.previousValue.forEach(i=>{let n=e.searchMatches.currentValue.some(s=>s.id===i.id),r=this.selections.indexOf(i.id);!n&&r!==-1&&(this.selections.splice(r,1),this.selections.length===0&&this.updateFilterSettings([]),this.filterSettingsChanged.emit({filters:this.selections,operator:this.operator}));});}updateFilterSettings(e){this.selections.length>0&&!e.length&&(this.initialFilter=void 0,this.rerender()),this.selections=e,this.filterSettingsChanged.emit({filters:this.selections,operator:this.operator});}setFilterOperator(e=!1){e?this.operator="and":e||(this.operator="or"),this.selections.length&&this.filterSettingsChanged.emit({filters:this.selections,operator:this.operator});}showAllPagesContainingMatches(){this.operator="or",this.selections=this.searchMatches.map(e=>e.id),this.filterSettingsChanged.emit({filters:this.selections,operator:this.operator});}initiateSearch(){this.searchService.initiateSearch();}rerender(){this.reset=!0,setTimeout(()=>{this.reset=!1;},0);}static ɵfac=function(i){return new(i||t)();};static ɵcmp=U({type:t,selectors:[["rw-search-term-filter"]],hostBindings:function(i,n){i&1&&m("keydown.r",function(s){return n.resetFilters(s);},!1,F)("keydown.m",function(s){return n.condense(s);},!1,F)("keydown.o",function(s){return n.toggleFilterMode(s);},!1,F);},inputs:{initialFilter:"initialFilter",searchMatches:"searchMatches",resultsFound:"resultsFound",disabled:"disabled",iaLayer:"iaLayer",forceToHighlightSearchId:"forceToHighlightSearchId"},outputs:{filterSettingsChanged:"filterSettingsChanged",showResultDistribution:"showResultDistribution"},features:[se],decls:14,vars:8,consts:()=>{let e;e="Show all pages containing matches (M)";let i;i="Minimum one selections must match (O)";let n;n="All selections must match (O)";let r;r="Reset all filter settings (R)";let s;s="Open search window (CTRL/\u2318+F)";let a;a="Document search result distribution (D)";let l;l=" all of the above selections must match ";let c;c=" at least one of the above selections must match ";let _;return _="matching page(s)",[l,c,_,[1,"items-center","pt-3","pb-1.5","pl-3","pr-2.5"],[3,"roundedTop","roundedBottom","interactive","searchMatches","size","disabled","initialSelections","forceToHighlightSearchId"],[1,"text-right","pr-1.5"],[1,"text-xs","md:text-base"],[1,"pl-2","text-right","md:pt-1","text-green-800","dark:text-green-400"],["icon","magic","title",e,"styling","standard_outline",1,"ml-2","scale-75","inline-block"],["icon","layers-half","title",i,"styling","main_outline",1,"ml-2","scale-75","inline-block"],["icon","layers-fill","styling","main_outline","title",n,1,"ml-2","scale-75","inline-block"],["icon","x-lg","title",r,"styling","standard_outline",1,"ml-1","scale-75","inline-block"],["icon","search","styling","standard_outline","title",s,1,"ml-1","scale-75","inline-block",3,"clicked"],["icon","bar-chart","styling","standard_outline","title",a,1,"ml-1","scale-75","inline-block",3,"clicked"],[1,"text-right","mt-1","pt-0","px-3","py-1","shadow"],[3,"selected","roundedTop","roundedBottom","interactive","searchMatches","size","disabled","initialSelections","forceToHighlightSearchId"],[1,"inline-block","pl-1"],["icon","magic","title",e,"styling","standard_outline",1,"ml-2","scale-75","inline-block",3,"clicked"],["icon","layers-half","title",i,"styling","main_outline",1,"ml-2","scale-75","inline-block",3,"clicked"],["icon","layers-fill","styling","main_outline","title",n,1,"ml-2","scale-75","inline-block",3,"clicked"],["icon","x-lg","title",r,"styling","standard_outline",1,"ml-1","scale-75","inline-block",3,"clicked"]];},template:function(i,n){i&1&&(d(0,"div",3),N(1,ht,1,10,"rw-word-bar",4),u(),d(2,"div",5),N(3,ct,2,0,"span",6)(4,dt,2,0,"span",6)(5,ut,4,1,"span",7)(6,gt,1,0,"rw-button",8)(7,pt,1,0,"rw-button",9)(8,St,1,0,"rw-button",10)(9,ft,1,0,"rw-button",11),d(10,"rw-button",12),m("clicked",function(){return n.initiateSearch();}),u(),d(11,"rw-button",13),m("clicked",function(){return n.showResultDistribution.next();}),u()(),b(12,"div",14)(13,"div")),i&2&&(p(),T(n.reset?-1:1),p(2),T(n.selections.length&&n.operator==="and"&&n.selections.length>1?3:-1),p(),T(n.selections.length&&n.operator==="or"&&n.selections.length>1?4:-1),p(),T(n.resultsFound>0&&n.selections.length>=1?5:-1),p(),T(n.selections.length===0?6:-1),p(),T(n.selections.length>1&&n.operator==="and"?7:-1),p(),T(n.selections.length>1&&n.operator==="or"?8:-1),p(),T(n.selections.length?9:-1));},dependencies:[Ke,q],encapsulation:2});}return t;})();var K=Object.freeze({Linear:Object.freeze({None:function(t){return t;},In:function(t){return t;},Out:function(t){return t;},InOut:function(t){return t;}}),Quadratic:Object.freeze({In:function(t){return t*t;},Out:function(t){return t*(2-t);},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1);}}),Cubic:Object.freeze({In:function(t){return t*t*t;},Out:function(t){return--t*t*t+1;},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2);}}),Quartic:Object.freeze({In:function(t){return t*t*t*t;},Out:function(t){return 1- --t*t*t*t;},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2);}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t;},Out:function(t){return--t*t*t*t*t+1;},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2);}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2);},Out:function(t){return Math.sin(t*Math.PI/2);},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)));}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1);},Out:function(t){return t===1?1:1-Math.pow(2,-10*t);},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2);}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t);},Out:function(t){return Math.sqrt(1- --t*t);},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1);}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI);},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1;},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1);}}),Back:Object.freeze({In:function(t){var o=1.70158;return t===1?1:t*t*((o+1)*t-o);},Out:function(t){var o=1.70158;return t===0?0:--t*t*((o+1)*t+o)+1;},InOut:function(t){var o=2.5949095;return(t*=2)<1?.5*(t*t*((o+1)*t-o)):.5*((t-=2)*t*((o+1)*t+o)+2);}}),Bounce:Object.freeze({In:function(t){return 1-K.Bounce.Out(1-t);},Out:function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375;},InOut:function(t){return t<.5?K.Bounce.In(t*2)*.5:K.Bounce.Out(t*2-1)*.5+.5;}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(o){return Math.pow(o,t);},Out:function(o){return 1-Math.pow(1-o,t);},InOut:function(o){return o<.5?Math.pow(o*2,t)/2:(1-Math.pow(2-o*2,t))/2+.5;}};}}),re=function(){return performance.now();},mt=function(){function t(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,o);}return t.prototype.getAll=function(){var o=this;return Object.keys(this._tweens).map(function(e){return o._tweens[e];});},t.prototype.removeAll=function(){this._tweens={};},t.prototype.add=function(){for(var o,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var n=0,r=e;n<r.length;n++){var s=r[n];(o=s._group)===null||o===void 0||o.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s;}},t.prototype.remove=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];for(var i=0,n=o;i<n.length;i++){var r=n[i];r._group=void 0,delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()];}},t.prototype.allStopped=function(){return this.getAll().every(function(o){return!o.isPlaying();});},t.prototype.update=function(o,e){o===void 0&&(o=re()),e===void 0&&(e=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var r=this._tweens[i[n]],s=!e;r&&r.update(o,s)===!1&&!e&&this.remove(r);}i=Object.keys(this._tweensAddedDuringUpdate);}},t;}(),Z={Linear:function(t,o){var e=t.length-1,i=e*o,n=Math.floor(i),r=Z.Utils.Linear;return o<0?r(t[0],t[1],i):o>1?r(t[e],t[e-1],e-i):r(t[n],t[n+1>e?e:n+1],i-n);},Bezier:function(t,o){for(var e=0,i=t.length-1,n=Math.pow,r=Z.Utils.Bernstein,s=0;s<=i;s++)e+=n(1-o,i-s)*n(o,s)*t[s]*r(i,s);return e;},CatmullRom:function(t,o){var e=t.length-1,i=e*o,n=Math.floor(i),r=Z.Utils.CatmullRom;return t[0]===t[e]?(o<0&&(n=Math.floor(i=e*(1+o))),r(t[(n-1+e)%e],t[n],t[(n+1)%e],t[(n+2)%e],i-n)):o<0?t[0]-(r(t[0],t[0],t[1],t[1],-i)-t[0]):o>1?t[e]-(r(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):r(t[n?n-1:0],t[n],t[e<n+1?e:n+1],t[e<n+2?e:n+2],i-n);},Utils:{Linear:function(t,o,e){return(o-t)*e+t;},Bernstein:function(t,o){var e=Z.Utils.Factorial;return e(t)/e(o)/e(t-o);},Factorial:function(){var t=[1];return function(o){var e=1;if(t[o])return t[o];for(var i=o;i>1;i--)e*=i;return t[o]=e,e;};}(),CatmullRom:function(t,o,e,i,n){var r=(e-t)*.5,s=(i-o)*.5,a=n*n,l=n*a;return(2*o-2*e+r+s)*l+(-3*o+3*e-2*r-s)*a+r*n+o;}}},et=function(){function t(){}return t.nextId=function(){return t._nextId++;},t._nextId=0,t;}(),Te=new mt(),tt=function(){function t(o,e){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=K.Linear.None,this._interpolationFunction=Z.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=et.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=o,typeof e=="object"?(this._group=e,e.add(this)):e===!0&&(this._group=Te,Te.add(this));}return t.prototype.getId=function(){return this._id;},t.prototype.isPlaying=function(){return this._isPlaying;},t.prototype.isPaused=function(){return this._isPaused;},t.prototype.getDuration=function(){return this._duration;},t.prototype.to=function(o,e){if(e===void 0&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=o,this._propertiesAreSetUp=!1,this._duration=e<0?0:e,this;},t.prototype.duration=function(o){return o===void 0&&(o=1e3),this._duration=o<0?0:o,this;},t.prototype.dynamic=function(o){return o===void 0&&(o=!1),this._isDynamic=o,this;},t.prototype.start=function(o,e){if(o===void 0&&(o=re()),e===void 0&&(e=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=o,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n={};for(var r in this._valuesEnd)n[r]=this._valuesEnd[r];this._valuesEnd=n;}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e);}return this;},t.prototype.startFromCurrentValues=function(o){return this.start(o,!0);},t.prototype._setupProperties=function(o,e,i,n,r){for(var s in i){var a=o[s],l=Array.isArray(a),c=l?"array":typeof a,_=!l&&Array.isArray(i[s]);if(!(c==="undefined"||c==="function")){if(_){var h=i[s];if(h.length===0)continue;for(var g=[a],f=0,M=h.length;f<M;f+=1){var w=this._handleRelativeValue(a,h[f]);if(isNaN(w)){_=!1,console.warn("Found invalid interpolation list. Skipping.");break;}g.push(w);}_&&(i[s]=g);}if((c==="object"||l)&&a&&!_){e[s]=l?[]:{};var I=a;for(var O in I)e[s][O]=I[O];n[s]=l?[]:{};var h=i[s];if(!this._isDynamic){var oe={};for(var O in h)oe[O]=h[O];i[s]=h=oe;}this._setupProperties(I,e[s],h,n[s],r);}else(typeof e[s]>"u"||r)&&(e[s]=a),l||(e[s]*=1),_?n[s]=i[s].slice().reverse():n[s]=e[s]||0;}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this;},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this;},t.prototype.pause=function(o){return o===void 0&&(o=re()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=o,this);},t.prototype.resume=function(o){return o===void 0&&(o=re()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=o-this._pauseStart,this._pauseStart=0,this);},t.prototype.stopChainedTweens=function(){for(var o=0,e=this._chainedTweens.length;o<e;o++)this._chainedTweens[o].stop();return this;},t.prototype.group=function(o){return o?(o.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this);},t.prototype.remove=function(){var o;return(o=this._group)===null||o===void 0||o.remove(this),this;},t.prototype.delay=function(o){return o===void 0&&(o=0),this._delayTime=o,this;},t.prototype.repeat=function(o){return o===void 0&&(o=0),this._initialRepeat=o,this._repeat=o,this;},t.prototype.repeatDelay=function(o){return this._repeatDelayTime=o,this;},t.prototype.yoyo=function(o){return o===void 0&&(o=!1),this._yoyo=o,this;},t.prototype.easing=function(o){return o===void 0&&(o=K.Linear.None),this._easingFunction=o,this;},t.prototype.interpolation=function(o){return o===void 0&&(o=Z.Linear),this._interpolationFunction=o,this;},t.prototype.chain=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return this._chainedTweens=o,this;},t.prototype.onStart=function(o){return this._onStartCallback=o,this;},t.prototype.onEveryStart=function(o){return this._onEveryStartCallback=o,this;},t.prototype.onUpdate=function(o){return this._onUpdateCallback=o,this;},t.prototype.onRepeat=function(o){return this._onRepeatCallback=o,this;},t.prototype.onComplete=function(o){return this._onCompleteCallback=o,this;},t.prototype.onStop=function(o){return this._onStopCallback=o,this;},t.prototype.update=function(o,e){var i=this,n;if(o===void 0&&(o=re()),e===void 0&&(e=t.autoStartOnUpdate),this._isPaused)return!0;var r;if(!this._goToEnd&&!this._isPlaying)if(e)this.start(o,!0);else return!1;if(this._goToEnd=!1,o<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=o-this._startTime,a=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),l=this._duration+this._repeat*a,c=function(){if(i._duration===0||s>l)return 1;var w=Math.trunc(s/a),I=s-w*a,O=Math.min(I/i._duration,1);return O===0&&s===i._duration?1:O;},_=c(),h=this._easingFunction(_);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,_),this._duration===0||s>=this._duration)if(this._repeat>0){var g=Math.min(Math.trunc((s-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=g);for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*g,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0;}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var f=0,M=this._chainedTweens.length;f<M;f++)this._chainedTweens[f].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1;}return!0;},t.prototype._updateProperties=function(o,e,i,n){for(var r in i)if(e[r]!==void 0){var s=e[r]||0,a=i[r],l=Array.isArray(o[r]),c=Array.isArray(a),_=!l&&c;_?o[r]=this._interpolationFunction(a,n):typeof a=="object"&&a?this._updateProperties(o[r],s,a,n):(a=this._handleRelativeValue(s,a),typeof a=="number"&&(o[r]=s+(a-s)*n));}},t.prototype._handleRelativeValue=function(o,e){return typeof e!="string"?e:e.charAt(0)==="+"||e.charAt(0)==="-"?o+parseFloat(e):parseFloat(e);},t.prototype._swapEndStartRepeatValues=function(o){var e=this._valuesStartRepeat[o],i=this._valuesEnd[o];typeof i=="string"?this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(i):this._valuesStartRepeat[o]=this._valuesEnd[o],this._valuesEnd[o]=e;},t.autoStartOnUpdate=!1,t;}();var ti=et.nextId,k=Te,ii=k.getAll.bind(k),ni=k.removeAll.bind(k),ri=k.add.bind(k),oi=k.remove.bind(k),si=k.update.bind(k);var Ct=["header"],Tt=["container"],Rt=["content"],vt=["invisiblePadding"],Pt=["*"];function wt(){return{checkResizeInterval:1e3,modifyOverflowStyleOfParentScroll:!0,resizeBypassRefreshThreshold:5,scrollAnimationTime:750,scrollDebounceTime:0,scrollThrottlingTime:0,stripedTable:!1};}var it=(()=>{class t{element;renderer;zone;changeDetectorRef;viewPortItems;window=window;get viewPortInfo(){let e=this.previousViewPort||{};return{startIndex:e.startIndex||0,endIndex:e.endIndex||0,scrollStartPosition:e.scrollStartPosition||0,scrollEndPosition:e.scrollEndPosition||0,maxScrollPosition:e.maxScrollPosition||0,startIndexWithBuffer:e.startIndexWithBuffer||0,endIndexWithBuffer:e.endIndexWithBuffer||0};}executeRefreshOutsideAngularZone=!1;_enableUnequalChildrenSizes=!1;get enableUnequalChildrenSizes(){return this._enableUnequalChildrenSizes;}set enableUnequalChildrenSizes(e){this._enableUnequalChildrenSizes!==e&&(this._enableUnequalChildrenSizes=e,this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0);}RTL=!1;useMarginInsteadOfTranslate=!1;modifyOverflowStyleOfParentScroll;stripedTable;scrollbarWidth;scrollbarHeight;childWidth;childHeight;ssrChildWidth;ssrChildHeight;ssrViewportWidth=1920;ssrViewportHeight=1080;_bufferAmount;get bufferAmount(){return typeof this._bufferAmount=="number"&&this._bufferAmount>=0?this._bufferAmount:this.enableUnequalChildrenSizes?5:0;}set bufferAmount(e){this._bufferAmount=e;}scrollAnimationTime;resizeBypassRefreshThreshold;_scrollThrottlingTime;get scrollThrottlingTime(){return this._scrollThrottlingTime;}set scrollThrottlingTime(e){this._scrollThrottlingTime=e,this.updateOnScrollFunction();}_scrollDebounceTime;get scrollDebounceTime(){return this._scrollDebounceTime;}set scrollDebounceTime(e){this._scrollDebounceTime=e,this.updateOnScrollFunction();}onScroll;updateOnScrollFunction(){this.scrollDebounceTime?this.onScroll=this.debounce(()=>{this.refresh_internal(!1);},this.scrollDebounceTime):this.scrollThrottlingTime?this.onScroll=this.throttleTrailing(()=>{this.refresh_internal(!1);},this.scrollThrottlingTime):this.onScroll=()=>{this.refresh_internal(!1);};}checkScrollElementResizedTimer;_checkResizeInterval;get checkResizeInterval(){return this._checkResizeInterval;}set checkResizeInterval(e){this._checkResizeInterval!==e&&(this._checkResizeInterval=e,this.addScrollEventHandlers());}_items=[];get items(){return this._items;}set items(e){e!==this._items&&(this._items=e||[],this.refresh_internal(!0));}compareItems=(e,i)=>e===i;_horizontal;get horizontal(){return this._horizontal;}set horizontal(e){this._horizontal=e,this.updateDirection();}revertParentOverscroll(){let e=this.getScrollElement();e&&this.oldParentScrollOverflow&&(e.style["overflow-y"]=this.oldParentScrollOverflow.y,e.style["overflow-x"]=this.oldParentScrollOverflow.x),this.oldParentScrollOverflow=void 0;}oldParentScrollOverflow;_parentScroll;get parentScroll(){return this._parentScroll;}set parentScroll(e){if(this._parentScroll===e)return;this.revertParentOverscroll(),this._parentScroll=e,this.addScrollEventHandlers();let i=this.getScrollElement();this.modifyOverflowStyleOfParentScroll&&i!==this.element.nativeElement&&(this.oldParentScrollOverflow={x:i.style["overflow-x"],y:i.style["overflow-y"]},i.style["overflow-y"]=this.horizontal?"visible":"auto",i.style["overflow-x"]=this.horizontal?"auto":"visible");}vsUpdate=new x();vsChange=new x();vsStart=new x();vsEnd=new x();contentElementRef;invisiblePaddingElementRef;headerElementRef;containerElementRef;ngOnInit(){this.addScrollEventHandlers();}ngOnDestroy(){this.removeScrollEventHandlers(),this.revertParentOverscroll();}ngOnChanges(e){let i=this.cachedItemsLength!==this.items.length;this.cachedItemsLength=this.items.length;let n=!e.items||!e.items.previousValue||e.items.previousValue.length===0;this.refresh_internal(i||n);}ngDoCheck(){if(this.cachedItemsLength!==this.items.length){this.cachedItemsLength=this.items.length,this.refresh_internal(!0);return;}if(this.previousViewPort&&this.viewPortItems&&this.viewPortItems.length>0){let e=!1;for(let i=0;i<this.viewPortItems.length;++i)if(!this.compareItems(this.items[this.previousViewPort.startIndexWithBuffer+i],this.viewPortItems[i])){e=!0;break;}e&&this.refresh_internal(!0);}}refresh(){this.refresh_internal(!0);}invalidateAllCachedMeasurements(){this.wrapGroupDimensions={maxChildSizePerWrapGroup:[],numberOfKnownWrapGroupChildSizes:0,sumOfKnownWrapGroupChildWidths:0,sumOfKnownWrapGroupChildHeights:0},this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0,this.refresh_internal(!1);}invalidateCachedMeasurementForItem(e){if(this.enableUnequalChildrenSizes){let i=this.items&&this.items.indexOf(e);i>=0&&this.invalidateCachedMeasurementAtIndex(i);}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1);}invalidateCachedMeasurementAtIndex(e){if(this.enableUnequalChildrenSizes){let i=this.wrapGroupDimensions.maxChildSizePerWrapGroup[e];i&&(this.wrapGroupDimensions.maxChildSizePerWrapGroup[e]=void 0,--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=i.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=i.childHeight||0);}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1);}scrollInto(e,i=!0,n=0,r=void 0,s=void 0){let a=this.items.indexOf(e);a!==-1&&this.scrollToIndex(a,i,n,r,s);}scrollToIndex(e,i=!0,n=0,r=void 0,s=void 0){let a=5,l=()=>{if(--a,a<=0){s&&s();return;}let c=this.calculateDimensions(),_=Math.min(Math.max(e,0),c.itemCount-1);if(this.previousViewPort.startIndex===_){s&&s();return;}this.scrollToIndex_internal(e,i,n,0,l);};this.scrollToIndex_internal(e,i,n,r,l);}scrollToIndex_internal(e,i=!0,n=0,r=void 0,s=void 0){r=r===void 0?this.scrollAnimationTime:r;let a=this.calculateDimensions(),l=this.calculatePadding(e,a)+n;i||(l-=a.wrapGroupsPerPage*a[this._childScrollDim]),this.scrollToPosition(l,r,s);}scrollToPosition(e,i=void 0,n=void 0){e+=this.getElementsOffset(),i=i===void 0?this.scrollAnimationTime:i;let r=this.getScrollElement(),s;if(this.currentTween&&(this.currentTween.stop(),this.currentTween=void 0),!i){this.renderer.setProperty(r,this._scrollType,e),this.refresh_internal(!1,n);return;}let a={scrollPosition:r[this._scrollType]},l=new tt(a).to({scrollPosition:e},i).easing(K.Quadratic.Out).onUpdate(_=>{isNaN(_.scrollPosition)||(this.renderer.setProperty(r,this._scrollType,_.scrollPosition),this.refresh_internal(!1));}).onStop(()=>{cancelAnimationFrame(s);}).start(),c=_=>{if(l.isPlaying()){if(l.update(_),a.scrollPosition===e){this.refresh_internal(!1,n);return;}this.zone.runOutsideAngular(()=>{s=requestAnimationFrame(c);});}};c(),this.currentTween=l;}isAngularUniversalSSR;constructor(e,i,n,r,s,a){this.element=e,this.renderer=i,this.zone=n,this.changeDetectorRef=r,this.isAngularUniversalSSR=We(s),this.checkResizeInterval=a.checkResizeInterval,this.modifyOverflowStyleOfParentScroll=a.modifyOverflowStyleOfParentScroll,this.resizeBypassRefreshThreshold=a.resizeBypassRefreshThreshold,this.scrollAnimationTime=a.scrollAnimationTime,this.scrollDebounceTime=a.scrollDebounceTime,this.scrollThrottlingTime=a.scrollThrottlingTime,this.scrollbarHeight=a.scrollbarHeight,this.scrollbarWidth=a.scrollbarWidth,this.stripedTable=a.stripedTable,this.horizontal=!1,this.resetWrapGroupDimensions();}getElementSize(e){let i=e.getBoundingClientRect(),n=getComputedStyle(e),r=parseInt(n["margin-top"],10)||0,s=parseInt(n["margin-bottom"],10)||0,a=parseInt(n["margin-left"],10)||0,l=parseInt(n["margin-right"],10)||0;return{top:i.top+r,bottom:i.bottom+s,left:i.left+a,right:i.right+l,width:i.width+a+l,height:i.height+r+s};}previousScrollBoundingRect;checkScrollElementResized(){let e=this.getElementSize(this.getScrollElement()),i;if(!this.previousScrollBoundingRect)i=!0;else{let n=Math.abs(e.width-this.previousScrollBoundingRect.width),r=Math.abs(e.height-this.previousScrollBoundingRect.height);i=n>this.resizeBypassRefreshThreshold||r>this.resizeBypassRefreshThreshold;}i&&(this.previousScrollBoundingRect=e,e.width>0&&e.height>0&&this.refresh_internal(!1));}_invisiblePaddingProperty;_offsetType;_scrollType;_pageOffsetType;_childScrollDim;_translateDir;_marginDir;updateDirection(){this.horizontal?(this._childScrollDim="childWidth",this._invisiblePaddingProperty="width",this._marginDir="margin-left",this._offsetType="offsetLeft",this._pageOffsetType="pageXOffset",this._scrollType="scrollLeft",this._translateDir="translateX"):(this._childScrollDim="childHeight",this._invisiblePaddingProperty="height",this._marginDir="margin-top",this._offsetType="offsetTop",this._pageOffsetType="pageYOffset",this._scrollType="scrollTop",this._translateDir="translateY");}debounce(e,i){let n=this.throttleTrailing(e,i),r=function(){n.cancel(),n.apply(this,arguments);};return r.cancel=function(){n.cancel();},r;}throttleTrailing(e,i){let n,r=arguments,s=function(){let a=this;r=arguments,!n&&(i<=0?e.apply(a,r):n=setTimeout(function(){n=void 0,e.apply(a,r);},i));};return s.cancel=function(){n&&(clearTimeout(n),n=void 0);},s;}calculatedScrollbarWidth=0;calculatedScrollbarHeight=0;padding=0;previousViewPort={};currentTween;cachedItemsLength;disposeScrollHandler;disposeResizeHandler;refresh_internal(e,i=void 0,n=2){if(e&&this.previousViewPort&&this.previousViewPort.scrollStartPosition>0){let r=this.previousViewPort,s=this.viewPortItems,a=i;i=()=>{let l=this.previousViewPort.scrollLength-r.scrollLength;if(l>0&&this.viewPortItems){let c=s[0],_=this.items.findIndex(h=>this.compareItems(c,h));if(_>this.previousViewPort.startIndexWithBuffer){let h=!1;for(let g=1;g<this.viewPortItems.length;++g)if(!this.compareItems(this.items[_+g],s[g])){h=!0;break;}if(!h){this.scrollToPosition(this.previousViewPort.scrollStartPosition+l,0,a);return;}}}a&&a();};}this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e&&this.resetWrapGroupDimensions();let r=this.calculateViewport(),s=e||r.startIndex!==this.previousViewPort.startIndex,a=e||r.endIndex!==this.previousViewPort.endIndex,l=r.scrollbarLength!==this.previousViewPort.scrollbarLength,c=r.padding!==this.previousViewPort.padding,_=r.scrollStartPosition!==this.previousViewPort.scrollStartPosition||r.scrollEndPosition!==this.previousViewPort.scrollEndPosition||r.maxScrollPosition!==this.previousViewPort.maxScrollPosition;if(this.previousViewPort=r,l&&this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,this._invisiblePaddingProperty,`${r.scrollLength}px`),c&&(this.useMarginInsteadOfTranslate?this.renderer.setStyle(this.contentElementRef.nativeElement,this._marginDir,`${r.padding}px`):(this.renderer.setStyle(this.contentElementRef.nativeElement,"transform",`${this._translateDir}(${r.padding}px)`),this.renderer.setStyle(this.contentElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${r.padding}px)`))),this.headerElementRef){let g=this.getScrollElement()[this._scrollType],f=this.getElementsOffset(),M=Math.max(g-r.padding-f+this.headerElementRef.nativeElement.clientHeight,0);this.renderer.setStyle(this.headerElementRef.nativeElement,"transform",`${this._translateDir}(${M}px)`),this.renderer.setStyle(this.headerElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${M}px)`);}let h=s||a?{startIndex:r.startIndex,endIndex:r.endIndex,scrollStartPosition:r.scrollStartPosition,scrollEndPosition:r.scrollEndPosition,startIndexWithBuffer:r.startIndexWithBuffer,endIndexWithBuffer:r.endIndexWithBuffer,maxScrollPosition:r.maxScrollPosition}:void 0;if(s||a||_){let g=()=>{if(this.viewPortItems=r.startIndexWithBuffer>=0&&r.endIndexWithBuffer>=0?this.items.slice(r.startIndexWithBuffer,r.endIndexWithBuffer+1):[],this.vsUpdate.emit(this.viewPortItems),s&&this.vsStart.emit(h),a&&this.vsEnd.emit(h),(s||a)&&(this.changeDetectorRef.markForCheck(),this.vsChange.emit(h)),n>0){this.refresh_internal(!1,i,n-1);return;}i&&i();};this.executeRefreshOutsideAngularZone?g():this.zone.run(g);}else{if(n>0&&(l||c)){this.refresh_internal(!1,i,n-1);return;}i&&i();}});});}getScrollElement(){return this.parentScroll instanceof Window?document.scrollingElement||document.documentElement||document.body:this.parentScroll||this.element.nativeElement;}addScrollEventHandlers(){if(this.isAngularUniversalSSR)return;let e=this.getScrollElement();this.removeScrollEventHandlers(),this.zone.runOutsideAngular(()=>{this.parentScroll instanceof Window?(this.disposeScrollHandler=this.renderer.listen("window","scroll",this.onScroll),this.disposeResizeHandler=this.renderer.listen("window","resize",this.onScroll)):(this.disposeScrollHandler=this.renderer.listen(e,"scroll",this.onScroll),this._checkResizeInterval>0&&(this.checkScrollElementResizedTimer=setInterval(()=>{this.checkScrollElementResized();},this._checkResizeInterval)));});}removeScrollEventHandlers(){this.checkScrollElementResizedTimer&&clearInterval(this.checkScrollElementResizedTimer),this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0),this.disposeResizeHandler&&(this.disposeResizeHandler(),this.disposeResizeHandler=void 0);}getElementsOffset(){if(this.isAngularUniversalSSR)return 0;let e=0;if(this.containerElementRef&&this.containerElementRef.nativeElement&&(e+=this.containerElementRef.nativeElement[this._offsetType]),this.parentScroll){let i=this.getScrollElement(),n=this.getElementSize(this.element.nativeElement),r=this.getElementSize(i);this.horizontal?e+=n.left-r.left:e+=n.top-r.top,this.parentScroll instanceof Window||(e+=i[this._scrollType]);}return e;}countItemsPerWrapGroup(){if(this.isAngularUniversalSSR)return Math.round(this.horizontal?this.ssrViewportHeight/this.ssrChildHeight:this.ssrViewportWidth/this.ssrChildWidth);let e=this.horizontal?"offsetLeft":"offsetTop",i=(this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement).children,n=i?i.length:0;if(n===0)return 1;let r=i[0][e],s=1;for(;s<n&&r===i[s][e];)++s;return s;}getScrollStartPosition(){let e;return this.parentScroll instanceof Window&&(e=window[this._pageOffsetType]),e||this.getScrollElement()[this._scrollType]||0;}minMeasuredChildWidth;minMeasuredChildHeight;wrapGroupDimensions;resetWrapGroupDimensions(){let e=this.wrapGroupDimensions;if(this.invalidateAllCachedMeasurements(),!this.enableUnequalChildrenSizes||!e||e.numberOfKnownWrapGroupChildSizes===0)return;let i=this.countItemsPerWrapGroup();for(let n=0;n<e.maxChildSizePerWrapGroup.length;++n){let r=e.maxChildSizePerWrapGroup[n];if(!r||!r.items||!r.items.length)continue;if(r.items.length!==i)return;let s=!1,a=i*n;for(let l=0;l<i;++l)if(!this.compareItems(r.items[l],this.items[a+l])){s=!0;break;}s||(++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=r.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=r.childHeight||0,this.wrapGroupDimensions.maxChildSizePerWrapGroup[n]=r);}}calculateDimensions(){let e=this.getScrollElement(),i=25;this.calculatedScrollbarHeight=Math.max(Math.min(e.offsetHeight-e.clientHeight,i),this.calculatedScrollbarHeight),this.calculatedScrollbarWidth=Math.max(Math.min(e.offsetWidth-e.clientWidth,i),this.calculatedScrollbarWidth);let n=e.offsetWidth-(this.scrollbarWidth||this.calculatedScrollbarWidth||(this.horizontal?0:i)),r=e.offsetHeight-(this.scrollbarHeight||this.calculatedScrollbarHeight||(this.horizontal?i:0)),s=this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement,a=this.countItemsPerWrapGroup(),l,c,_;if(this.isAngularUniversalSSR){n=this.ssrViewportWidth,r=this.ssrViewportHeight,c=this.ssrChildWidth,_=this.ssrChildHeight;let D=Math.max(Math.ceil(n/c),1),A=Math.max(Math.ceil(r/_),1);l=this.horizontal?D:A;}else if(this.enableUnequalChildrenSizes){let D=e[this._scrollType]-(this.previousViewPort?this.previousViewPort.padding:0),A=this.previousViewPort.startIndexWithBuffer||0,H=Math.ceil(A/a),G=0,X=0,Y=0,J=0;l=0;for(let ge=0;ge<s.children.length;++ge){++A;let at=s.children[ge],Re=this.getElementSize(at);if(G=Math.max(G,Re.width),X=Math.max(X,Re.height),A%a===0){let pe=this.wrapGroupDimensions.maxChildSizePerWrapGroup[H];pe&&(--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=pe.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=pe.childHeight||0),++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;let lt=this.items.slice(A-a,A);if(this.wrapGroupDimensions.maxChildSizePerWrapGroup[H]={childWidth:G,childHeight:X,items:lt},this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=G,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=X,this.horizontal){let W=Math.min(G,Math.max(n-Y,0));if(D>0){let ee=Math.min(D,W);W-=ee,D-=ee;}Y+=W,W>0&&n>=Y&&++l;}else{let W=Math.min(X,Math.max(r-J,0));if(D>0){let ee=Math.min(D,W);W-=ee,D-=ee;}J+=W,W>0&&r>=J&&++l;}++H,G=0,X=0;}}let ot=this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,st=this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;c=this.childWidth||ot||n,_=this.childHeight||st||r,this.horizontal?n>Y&&(l+=Math.ceil((n-Y)/c)):r>J&&(l+=Math.ceil((r-J)/_));}else{if(s.children.length>0){(!this.childWidth||!this.childHeight)&&(!this.minMeasuredChildWidth&&n>0&&(this.minMeasuredChildWidth=n),!this.minMeasuredChildHeight&&r>0&&(this.minMeasuredChildHeight=r));let H=s.children[0],G=this.getElementSize(H);this.minMeasuredChildWidth=Math.min(this.minMeasuredChildWidth,G.width),this.minMeasuredChildHeight=Math.min(this.minMeasuredChildHeight,G.height);}c=this.childWidth||this.minMeasuredChildWidth||n,_=this.childHeight||this.minMeasuredChildHeight||r;let D=Math.max(Math.ceil(n/c),1),A=Math.max(Math.ceil(r/_),1);l=this.horizontal?D:A;}let h=this.items.length,g=a*l,f=h/g,M=Math.ceil(h/a),w=0,I=this.horizontal?c:_;if(this.enableUnequalChildrenSizes){let D=0;for(let A=0;A<M;++A){let H=this.wrapGroupDimensions.maxChildSizePerWrapGroup[A]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[A][this._childScrollDim];H?w+=H:++D;}w+=Math.round(D*I);}else w=M*I;this.headerElementRef&&(w+=this.headerElementRef.nativeElement.clientHeight);let O=this.horizontal?n:r,oe=Math.max(w-O,0);return{childHeight:_,childWidth:c,itemCount:h,itemsPerPage:g,itemsPerWrapGroup:a,maxScrollPosition:oe,pageCount_fractional:f,scrollLength:w,viewportLength:O,wrapGroupsPerPage:l};}cachedPageSize=0;previousScrollNumberElements=0;calculatePadding(e,i){if(i.itemCount===0)return 0;let n=i[this._childScrollDim],r=Math.floor(e/i.itemsPerWrapGroup)||0;if(!this.enableUnequalChildrenSizes)return n*r;let s=0,a=0;for(let l=0;l<r;++l){let c=this.wrapGroupDimensions.maxChildSizePerWrapGroup[l]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[l][this._childScrollDim];c?a+=c:++s;}return a+=Math.round(s*n),a;}calculatePageInfo(e,i){let n=0,r=1,s=0,a=0;if(this.enableUnequalChildrenSizes){let g=Math.ceil(i.itemCount/i.itemsPerWrapGroup),f=0,M=i[this._childScrollDim],w=0;for(;w<g;++w){let O=this.wrapGroupDimensions.maxChildSizePerWrapGroup[w]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[w][this._childScrollDim];if(O?f+=O:f+=M,e<f){n=w/g;break;}}let I=w+1;for(;I<g;++I){let O=this.wrapGroupDimensions.maxChildSizePerWrapGroup[I]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[I][this._childScrollDim];if(O?f+=O:f+=M,e+i.viewportLength<f){r=I/g;break;}}s=w,a=I;}else{n=e/i.scrollLength;let g=Math.min(Math.max(n*i.pageCount_fractional,0),i.pageCount_fractional)*i.itemsPerPage,f=i.itemCount-i.itemsPerPage-1;s=Math.min(Math.floor(g),f),a=Math.ceil(g)+i.itemsPerPage-1;}if(s-=s%i.itemsPerWrapGroup,this.stripedTable){let g=2*i.itemsPerWrapGroup;s%g!==0&&(s=Math.max(s-s%g,0));}let l=(a+1)%i.itemsPerWrapGroup;l>0&&(a+=i.itemsPerWrapGroup-l),isNaN(s)&&(s=0),isNaN(a)&&(a=0),s=Math.min(Math.max(s,0),i.itemCount-1),a=Math.min(Math.max(a,0),i.itemCount-1);let c=this.bufferAmount*i.itemsPerWrapGroup,_=Math.min(Math.max(s-c,0),i.itemCount-1),h=Math.min(Math.max(a+c,0),i.itemCount-1);return{startIndex:s,endIndex:a,startIndexWithBuffer:_,endIndexWithBuffer:h,scrollStartPosition:e,scrollEndPosition:e+i.viewportLength,maxScrollPosition:i.maxScrollPosition};}calculateViewport(){let e=this.calculateDimensions(),i=this.getElementsOffset(),n=this.getScrollStartPosition();n>e.scrollLength+i&&!(this.parentScroll instanceof Window)?n=e.scrollLength:n-=i,n=Math.max(0,n);let r=this.calculatePageInfo(n,e),s=this.calculatePadding(r.startIndexWithBuffer,e),a=Math.round(e.scrollLength);return{startIndex:r.startIndex,endIndex:r.endIndex,startIndexWithBuffer:r.startIndexWithBuffer,endIndexWithBuffer:r.endIndexWithBuffer,padding:Math.round(s),scrollLength:a,scrollbarLength:a+i,scrollStartPosition:r.scrollStartPosition,scrollEndPosition:r.scrollEndPosition,maxScrollPosition:r.maxScrollPosition};}static ɵfac=function(i){return new(i||t)(z(B),z(Ie),z(Pe),z(le),z(we),z("virtual-scroller-default-options",8));};static ɵcmp=U({type:t,selectors:[["virtual-scroller"],["","virtualScroller",""]],contentQueries:function(i,n,r){if(i&1&&(me(r,Ct,5,B),me(r,Tt,5,B)),i&2){let s;te(s=ie())&&(n.headerElementRef=s.first),te(s=ie())&&(n.containerElementRef=s.first);}},viewQuery:function(i,n){if(i&1&&(Ee(Rt,7,B),Ee(vt,7,B)),i&2){let r;te(r=ie())&&(n.contentElementRef=r.first),te(r=ie())&&(n.invisiblePaddingElementRef=r.first);}},hostVars:8,hostBindings:function(i,n){i&2&&y("horizontal",n.horizontal)("vertical",!n.horizontal)("selfScroll",!n.parentScroll)("rtl",n.RTL);},inputs:{executeRefreshOutsideAngularZone:"executeRefreshOutsideAngularZone",enableUnequalChildrenSizes:"enableUnequalChildrenSizes",RTL:"RTL",useMarginInsteadOfTranslate:"useMarginInsteadOfTranslate",modifyOverflowStyleOfParentScroll:"modifyOverflowStyleOfParentScroll",stripedTable:"stripedTable",scrollbarWidth:"scrollbarWidth",scrollbarHeight:"scrollbarHeight",childWidth:"childWidth",childHeight:"childHeight",ssrChildWidth:"ssrChildWidth",ssrChildHeight:"ssrChildHeight",ssrViewportWidth:"ssrViewportWidth",ssrViewportHeight:"ssrViewportHeight",bufferAmount:"bufferAmount",scrollAnimationTime:"scrollAnimationTime",resizeBypassRefreshThreshold:"resizeBypassRefreshThreshold",scrollThrottlingTime:"scrollThrottlingTime",scrollDebounceTime:"scrollDebounceTime",checkResizeInterval:"checkResizeInterval",items:"items",compareItems:"compareItems",horizontal:"horizontal",parentScroll:"parentScroll"},outputs:{vsUpdate:"vsUpdate",vsChange:"vsChange",vsStart:"vsStart",vsEnd:"vsEnd"},exportAs:["virtualScroller"],standalone:!1,features:[se],ngContentSelectors:Pt,decls:5,vars:0,consts:[["invisiblePadding",""],["content",""],[1,"total-padding"],[1,"scrollable-content"]],template:function(i,n){i&1&&(xe(),b(0,"div",2,0),d(2,"div",3,1),ye(4),u());},styles:["[_nghost-%COMP%]{position:relative;display:block;-webkit-overflow-scrolling:touch}.horizontal.selfScroll[_nghost-%COMP%]{overflow-y:visible;overflow-x:auto}.horizontal.selfScroll.rtl[_nghost-%COMP%]{transform:scaleX(-1)}.vertical.selfScroll[_nghost-%COMP%]{overflow-y:auto;overflow-x:visible}.scrollable-content[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:100%;max-width:100vw;max-height:100vh;position:absolute}.scrollable-content[_ngcontent-%COMP%]    >*{box-sizing:border-box}.horizontal[_nghost-%COMP%]{white-space:nowrap}.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]{display:flex}.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]    >*{flex-shrink:0;flex-grow:0;white-space:initial}.horizontal.rtl[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]    >*{transform:scaleX(-1)}.total-padding[_ngcontent-%COMP%]{width:1px;opacity:0}.horizontal[_nghost-%COMP%]   .total-padding[_ngcontent-%COMP%]{height:100%}"]});}return t;})(),nt=(()=>{class t{static ɵfac=function(i){return new(i||t)();};static ɵmod=Ne({type:t});static ɵinj=ve({providers:[{provide:"virtual-scroller-default-options",useFactory:wt}],imports:[Ge]});}return t;})();function It(t,o){if(t&1){let e=v();d(0,"rw-button",18),m("clicked",function(){E(e);let n=S(2);return C(n.bookmark());}),u();}}function Nt(t,o){if(t&1){let e=v();d(0,"rw-button",19),m("clicked",function(){E(e);let n=S(2);return C(n.bookmark());}),u();}}function Mt(t,o){if(t&1){let e=v();d(0,"rw-button",20),m("clicked",function(){E(e);let n=S(2);return C(n.toggleContext());}),u();}}function At(t,o){if(t&1){let e=v();d(0,"rw-button",21),m("clicked",function(){E(e);let n=S(2);return C(n.toggleContext());}),u();}}function Dt(t,o){if(t&1){let e=v();d(0,"div",2)(1,"rw-bookmark-browser",22),m("bookmarkForPageChanged",function(){E(e);let n=S(2);return C(n.page.bookmarked=!1);})("deadSpaceClicked",function(){E(e);let n=S(2);return C(n.closeImageViewer());})("escapeKeyPressed",function(){E(e);let n=S(2);return C(n.closeImageViewer());}),u()();}if(t&2){let e=S(2);p(),P("currentCase",e.caseId)("currentDocument",e.page.documentId)("openedPageId",e.page.id);}}function bt(t,o){if(t&1){let e=v();d(0,"div",1)(1,"div",2)(2,"rw-image-viewer",3),m("deadSpaceClicked",function(){E(e);let n=S();return C(n.closeImageViewer());}),u(),d(3,"div",4)(4,"div",5)(5,"rw-button",6),m("clicked",function(){E(e);let n=S();return C(n.initiateSearch());}),u(),b(6,"rw-button",7),d(7,"rw-button",8),m("clicked",function(){E(e);let n=S();return C(n.startTour());}),u(),b(8,"div",9)(9,"rw-button",10)(10,"rw-button",11)(11,"rw-button",12)(12,"div",9),N(13,It,1,0,"rw-button",13)(14,Nt,1,0,"rw-button",14),d(15,"rw-button",15),m("clicked",function(){E(e);let n=S();return C(n.pageToAttachNote.next(n.page));}),u(),N(16,Mt,1,0,"rw-button",16)(17,At,1,0,"rw-button",17),u()()(),N(18,Dt,2,3,"div",2),u();}if(t&2){let e=S();y("showContext",e.showContext)("showPageOnly",!e.showContext),p(2),P("page",e.page)("calcMargins",!0)("showBookmarkToggle",!0)("progress",(e.docPageIds.indexOf(e.page.id)||.001)*100/(e.docPageIds.length-1)),p(),y("blendIn",e.blendInControls),p(6),y("pointer-events-none",!e.docPageIds[e.docPageIds.indexOf(e.page.id)-1]),P("disabled",!e.docPageIds[e.docPageIds.indexOf(e.page.id)-1])("fragment",(e.docPageIds[e.docPageIds.indexOf(e.page.id)-1]||"").toString()),p(2),y("pointer-events-none",!e.docPageIds[e.docPageIds.indexOf(e.page.id)+1]),P("disabled",!e.docPageIds[e.docPageIds.indexOf(e.page.id)+1])("fragment",(e.docPageIds[e.docPageIds.indexOf(e.page.id)+1]||"").toString()),p(2),T(e.page.bookmarked?-1:13),p(),T(e.page.bookmarked?14:-1),p(),P("hint",e.page.noteCount?e.page.noteCount.toString():void 0),p(),T(e.showContext?-1:16),p(),T(e.showContext?17:-1),p(),T(e.showContext?18:-1);}}var rt=(()=>{class t{router=R(he);route=R(_e);settingsService=R(Be);pageService=R(je);searchService=R(Q);driverService=R(Ve);subscriptionStorage=R(de);iaService=R(j);page;caseId;documentPageIds=[];pageToAttachNote=new x();get docPageIds(){return this.documentPageIds;}content;showContext=!1;blendInControls=!1;close(){this.page&&this.iaService.is(this.iaLayer)&&this.router.navigate([],{fragment:""});}toggleEditor(){this.page&&(this.iaService.is(this.iaLayer)||this.iaService.is("bookmark-browser"))&&this.pageToAttachNote.next(this.page);}toggleBookmark(){this.page&&(this.iaService.is(this.iaLayer)||this.iaService.is("bookmark-browser"))&&this.bookmark();}toggleBookmarkBrowser(){(this.page&&this.iaService.is(this.iaLayer)||this.iaService.is("bookmark-browser"))&&requestAnimationFrame(()=>{this.toggleContext();});}previous(){if(!this.page||!this.iaService.is(this.iaLayer)&&!this.iaService.is("bookmark-browser"))return;let e=this.docPageIds[this.docPageIds.indexOf(this.page.id)+1];(e||e===0)&&this.router.navigate([],{fragment:e.toString()});}next(){if(!this.page||!this.iaService.is(this.iaLayer)&&!this.iaService.is("bookmark-browser"))return;let e=this.docPageIds[this.docPageIds.indexOf(this.page.id)-1];(e||e===0)&&this.router.navigate([],{fragment:e.toString()});}iaLayer="page-details-"+new Date().getTime();constructor(){setInterval(()=>{this.syncIaState();},250),this.subscriptionStorage.getStore("pageDetailsComponent").push(this.settingsService.fetchSettings().subscribe(i=>{this.showContext=i.modulesOpen,this.blendInControls=i.blendControls;let n=this.route.snapshot.params.caseId;n&&this.searchService.setCaseId(n),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"));});}));}toggleContext(){this.showContext=!this.showContext,requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"));});}bookmark(){this.page&&(this.page.bookmarked=!this.page.bookmarked,this.pageService.bookmark(this.page.id,this.page.bookmarked).subscribe());}closeImageViewer(){this.router.navigate(["./"],{fragment:"",relativeTo:this.route});}startTour(){this.driverService.drive(),this.blendInControls=!1;}initiateSearch(){this.searchService.initiateSearch();}ngOnInit(){this.syncIaState();}ngOnDestroy(){this.subscriptionStorage.destroy("pageDetailsComponent");}syncIaState(){this.page&&!this.iaService.knows(this.iaLayer)?this.iaService.add(this.iaLayer):!this.page&&this.iaService.is(this.iaLayer)&&this.iaService.take(this.iaLayer);}static ɵfac=function(i){return new(i||t)();};static ɵcmp=U({type:t,selectors:[["rw-page-details"]],hostBindings:function(i,n){i&1&&m("keydown.escape",function(s){return n.close(s);},!1,V)("keydown.n",function(s){return n.toggleEditor(s);},!1,V)("keydown.b",function(s){return n.toggleBookmark(s);},!1,V)("keydown.c",function(s){return n.toggleBookmarkBrowser(s);},!1,V)("keydown.arrowright",function(s){return n.previous(s);},!1,V)("keydown.arrowleft",function(s){return n.next(s);},!1,V);},inputs:{page:"page",caseId:"caseId",documentPageIds:"documentPageIds"},outputs:{pageToAttachNote:"pageToAttachNote"},decls:1,vars:1,consts:()=>{let e;e="Open search window (CTRL/\u2318+F)";let i;i="Open application settings";let n;n="Start assistant";let r;r="Back to previous page (\u2190)";let s;s="Close document (ESC)";let a;a="Continue to next page (\u2192)";let l;l="Bookmark this page (B)";let c;c="Delete page bookmark (B)";let _;_="Create page note(s) (N)";let h;h="Open bookmark browser (C)";let g;return g="Close bookmark browser (C)",[[1,"grid","backdrop-blur-sm","absolute","left-0","top-0","right-0","bottom-0","z-10","bg-slate-900","bg-opacity-90",3,"showContext","showPageOnly"],[1,"grid","backdrop-blur-sm","absolute","left-0","top-0","right-0","bottom-0","z-10","bg-slate-900","bg-opacity-90"],[1,"relative"],[3,"deadSpaceClicked","page","calcMargins","showBookmarkToggle","progress"],[1,"controls-canvas","absolute","left-0","bottom-0","right-0","py-3","z-20","transition-all","duration-300","delay-300","scale-50","sm:scale-75","md:scale-100"],[1,"mx-auto","text-center","whitespace-nowrap"],["title",e,"icon","search","styling","standard",1,"mx-1.5",3,"clicked"],["title",i,"routerLink","/settings","icon","wrench-adjustable","styling","standard",1,"mx-1.5"],["title",n,"icon","info-circle","styling","standard",1,"mx-1.5",3,"clicked"],[1,"inline-block","separator"],["icon","chevron-left","title",r,"routerLink","./","styling","standard",1,"mx-1.5",3,"disabled","fragment"],["title",s,"styling","standard","icon","x-lg","routerLink","./","fragment","",1,"mx-1.5"],["icon","chevron-right","title",a,"routerLink","./","styling","standard",1,"mx-1.5",3,"disabled","fragment"],["title",l,"icon","bookmark-plus-fill","styling","main_outline",1,"mx-1.5"],["title",c,"icon","bookmark-dash-fill","styling","main",1,"mx-1.5"],["icon","pencil-square","styling","standard","title",_,1,"mx-1.5",3,"clicked","hint"],["styling","main","icon","chevron-bar-left","title",h,1,"mx-1.5"],["title",g,"styling","main","icon","chevron-bar-right",1,"mx-1.5"],["title",l,"icon","bookmark-plus-fill","styling","main_outline",1,"mx-1.5",3,"clicked"],["title",c,"icon","bookmark-dash-fill","styling","main",1,"mx-1.5",3,"clicked"],["styling","main","icon","chevron-bar-left","title",h,1,"mx-1.5",3,"clicked"],["title",g,"styling","main","icon","chevron-bar-right",1,"mx-1.5",3,"clicked"],[3,"bookmarkForPageChanged","deadSpaceClicked","escapeKeyPressed","currentCase","currentDocument","openedPageId"]];},template:function(i,n){i&1&&N(0,bt,19,24,"div",0),i&2&&T(n.page?0:-1);},dependencies:[Qe,q,ce,Ye],styles:["@media (min-width: 768px){.blendIn[_ngcontent-%COMP%]{bottom:-3rem}}.blendIn[_ngcontent-%COMP%]:hover{bottom:0}.showContext[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr));grid-template-rows:repeat(2,minmax(0,1fr))}@media (min-width: 768px){.showContext[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr));grid-template-rows:repeat(1,minmax(0,1fr))}}.showPageOnly[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr));grid-template-rows:repeat(1,minmax(0,1fr))}@media (min-width: 768px){.showPageOnly[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr));grid-template-rows:repeat(1,minmax(0,1fr))}}.separator[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;height:30px;width:.125rem;--tw-translate-y: .5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:.375rem;background-color:rgb(125 211 252 / var(--tw-bg-opacity, 1));--tw-bg-opacity: .5 }"]});}return t;})();function xt(t,o){if(t&1&&(d(0,"span",9)(1,"span",22),$(2,"|"),u(),$(3),d(4,"span"),L(5,2),u()()),t&2){let e=S(2);p(3),ne("",e.totalPages," ");}}function yt(t,o){if(t&1){let e=v();d(0,"rw-search-term-filter",23),m("filterSettingsChanged",function(n){E(e);let r=S(2);return C(r.showPagesMatchingFilterSettings(n));})("showResultDistribution",function(){E(e);let n=S(2);return C(n.showResultDistribution());}),u();}if(t&2){let e=S(2);P("iaLayer",e.iaLayer)("disabled",e.fetching)("searchMatches",e.document.searchMatches)("initialFilter",e.initialFilter)("resultsFound",e.pageIds.length);}}function Lt(t,o){t&1&&(d(0,"rw-alert",14)(1,"div",24),L(2,3),u()()),t&2&&P("showCancelBtn",!1)("showConfirmBtn",!1)("type","info");}function kt(t,o){t&1&&(d(0,"rw-alert",14)(1,"div",24),L(2,4),u()()),t&2&&P("showCancelBtn",!1)("showConfirmBtn",!1)("type","info");}function Gt(t,o){if(t&1){let e=v();d(0,"rw-note",25),m("closeNotes",function(){E(e);let n=S(2);return C(n.pageToAttachNote=void 0);}),u();}if(t&2){let e=S(2);P("page",e.pageToAttachNote);}}function Wt(t,o){if(t&1){let e=v();d(0,"rw-result-distribution",26),m("closed",function(){E(e);let n=S(2);return C(n.resultDistribution=!1);}),u();}if(t&2){let e=S(2);P("document",e.document);}}function Bt(t,o){t&1&&(d(0,"div",18)(1,"div",27),b(2,"i",28)(3,"br"),d(4,"span",29),L(5,5),u()()());}function Ht(t,o){t&1&&(d(0,"div",18)(1,"div",27),b(2,"i",30)(3,"br"),d(4,"span",29),L(5,6),u()()());}function Ft(t,o){if(t&1){let e=v();d(0,"div",20)(1,"rw-page-image",31,0),m("dimensionChanged",function(n){E(e);let r=S(2);return C(r.calculateDimensions(n));}),d(3,"div",32),b(4,"span",33)(5,"rw-button",34),u()()();}if(t&2){let e=S(2);p(),P("allowSetHighlight",!0)("page",e.pagesToShow[0])("highlightSearchMatches",!1)("index",0)("showContext",!0);}}function Ut(t,o){if(t&1){let e=v();d(0,"rw-page-image",37),m("clicked",function(){let n=E(e).$implicit,r=S(3);return C(r.showPageDetails(n));}),d(1,"div",32)(2,"span",38),$(3),u(),d(4,"rw-button",39),m("clicked",function(){let n=E(e).$implicit,r=S(3);return C(r.pageToAttachNote=n);}),u()()();}if(t&2){let e=o.$implicit,i=o.$index;S();let n=ae(1),r=S(2);P("allowSetHighlight",!0)("isNewDocument",!!r.matchWord&&(i===0||i>0&&n.viewPortItems[i-1].documentId!==e.documentId))("page",e)("highlightSearchMatches",!0)("index",i)("showContext",!0),Me("style","height:"+r.calculatedHeight+"px",Oe),p(3),Le(e.pageNumber),p(),P("hint",e.noteCount?e.noteCount.toString():void 0);}}function Vt(t,o){if(t&1){let e=v();d(0,"virtual-scroller",35,1),m("vsUpdate",function(n){E(e);let r=ae(1),s=S(2);return C(s.updateVirtualScrollItemsInViewport(n,r));}),De(2,Ut,5,9,"rw-page-image",36,Ae),u();}if(t&2){let e=ae(1),i=S(2);P("items",i.pagesToShow)("bufferAmount",i.virtualScrollBufferSize),p(2),be(e.viewPortItems);}}function zt(t,o){if(t&1){let e=v();d(0,"rw-page"),Se(1,7),d(2,"h3",8),$(3),N(4,xt,6,1,"span",9),u(),b(5,"rw-button",10),fe(),d(6,"div",11),N(7,yt,1,5,"rw-search-term-filter",12),u(),Se(8,13),N(9,Lt,3,3,"rw-alert",14)(10,kt,3,3,"rw-alert",14)(11,Gt,1,1,"rw-note",15)(12,Wt,1,1,"rw-result-distribution",16),d(13,"section",17),N(14,Bt,6,0,"div",18)(15,Ht,6,0,"div",18),d(16,"rw-page-details",19),m("pageToAttachNote",function(n){E(e);let r=S();return C(r.pageToAttachNote=n);}),u(),N(17,Ft,6,5,"div",20)(18,Vt,4,2,"virtual-scroller",21),u(),fe(),u();}if(t&2){let e=S();p(3),ne(" ",e.matchWord?e.matchWord:e.document.originalName.replace(".pdf","")," "),p(),T(e.totalPages&&e.totalPages>1?4:-1),p(),P("routerLink",e.parentUrl),p(),y("h-0",!e.document||!e.document.searchMatches.length)("h-28",!!e.document&&e.document.searchMatches.length),p(),T(e.document&&e.document.searchMatches.length?7:-1),p(2),T(e.caseDeleted?9:-1),p(),T(e.documentDeleted?10:-1),p(),T(e.pageToAttachNote?11:-1),p(),T(e.resultDistribution?12:-1),p(2),T(e.fetching&&(!e.pagesToShow||!e.pagesToShow.length)?14:-1),p(),T(!e.fetching&&e.pagesToShow&&e.pagesToShow.length===0?15:-1),p(),y("opacity-0",!e.pageToShow)("pointer-events-none",!e.pageToShow),P("page",e.pageToShow)("caseId",e.document.caseId)("documentPageIds",e.pageIds),p(),T(!e.measurementCompleted&&e.pagesToShow.length?17:-1),p(),T(e.measurementCompleted?18:-1);}}var ue=-1,Yi=(()=>{class t{el=R(B);documentService=R(Ue);searchService=R(Q);highlightService=R($e);iaService=R(j);subscriptionStorage=R(de);route=R(_e);router=R(he);socket=R(Fe);changeDetector=R(le);document;pagesToShow=[];listCompleted=!1;availablePages;totalPages;pageIds=[];pageToShow;initialFilter;parentUrl;hasFilterEnabled=!1;fetching=!1;caseDeleted=!1;documentDeleted=!1;pageToAttachNote;measurementCompleted=!1;calculatedHeight=0;portioning;resultDistribution=!1;virtualScrollBufferSize=2;matchWord;currentFilterSettings;timeoutHandler;timeoutHandlerSizeCalculation;delayedVirtualScrollIndexUpdate;virtualScrollIndexOfItemInFocus;virtualScroller;virtualScrollLockViewportItemUpdate=!1;iaLayer="screen-pages-"+new Date().getTime();close(){this.iaService.is(this.iaLayer)&&this.router.navigate([this.parentUrl]);}openDistribution(){this.iaService.is(this.iaLayer)&&(this.resultDistribution=!0);}fitImage(e){!e.isTrusted||!this.iaService.is(this.iaLayer)||(this.virtualScrollLockViewportItemUpdate=!0,clearTimeout(this.timeoutHandler),this.timeoutHandler=setTimeout(()=>{this.measurementCompleted=!1,this.virtualScrollLockViewportItemUpdate=!1;},500));}constructor(){this.parentUrl=this.router.url.match(/\/cases\/\d+/)?.[0];let e=parseInt(this.router.url.split("/")[2],10),i=this.subscriptionStorage.getStore("subScreenPagesOverview");if(this.iaService.add(this.iaLayer),e>0){let n=this.socket.fromEvent("caseToDelete-"+e).subscribe(()=>{this.caseDeleted=!0,setTimeout(()=>{this.router.navigate(["/cases"],{replaceUrl:!0});},4500);});i.push(n);}i.push(this.route.params.subscribe(n=>{n.matchWord&&(this.availablePages=[],this.pagesToShow=[],this.fetching=!0,this.initialFilter=parseInt(this.route.snapshot.params.searchId,10),this.loadPages({filters:[this.initialFilter],operator:"and",matchWord:n.matchWord}));})),this.route.snapshot.params.searchId?(this.initialFilter=parseInt(this.route.snapshot.params.searchId,10),this.loadPages({filters:[this.initialFilter],operator:"and",matchWord:this.route.snapshot.params.matchWord})):this.loadPages(),this.fetchDocument(),i.push(this.route.fragment.subscribe(n=>{n?this.documentService.fetchPage(this.route.snapshot.params.documentId,parseInt(n,10)).subscribe(r=>{this.pageToShow&&this.highlightService.reset(),this.pageToShow=r;}):(this.pageToShow=void 0,this.highlightService.reset());})),i.push(this.socket.fromEvent("update").subscribe(n=>{if(["searchCreated","searchDeleted","searchResultExcluded","noteCreated","noteDeleted"].includes(n.name)&&n.refetch)if(this.pageToAttachNote?.id&&this.documentService.fetchPage(this.route.snapshot.params.documentId,this.pageToAttachNote?.id).subscribe(s=>{this.pageToAttachNote=s;}),this.pageToShow?.id){let s=this.pageIds.indexOf(this.pageToShow.id);this.documentService.fetchPage(this.route.snapshot.params.documentId,this.pageToShow.id).subscribe(a=>{this.pageToShow=a,this.syncPages(this.pageToShow.id,s);});}else this.fetchDocument(),this.syncPages();})),i.push(this.searchService.subscribeToRelevantChanges().subscribe(()=>{this.fetchDocument();}));}calculateDimensions(e){clearTimeout(this.timeoutHandlerSizeCalculation),this.measurementCompleted=!1,this.timeoutHandlerSizeCalculation=setTimeout(()=>{this.calculatedHeight=e.height,this.measurementCompleted=!0,setTimeout(()=>{!this.virtualScroller||!this.virtualScrollIndexOfItemInFocus||(this.virtualScroller.scrollToIndex(this.virtualScrollIndexOfItemInFocus),this.virtualScrollLockViewportItemUpdate=!1);},1e3);},680);}ngOnDestroy(){this.subscriptionStorage.destroy("subScreenPagesOverview"),this.iaService.take(this.iaLayer),clearTimeout(this.portioning);}showPagesMatchingFilterSettings(e){this.availablePages.length=0,this.pagesToShow.length=0,this.currentFilterSettings=e,this.loadPages(e);}loadPages(e={filters:[],operator:"and"}){this.hasFilterEnabled=e.filters.length>0,this.pageIds=[],this.listCompleted=!1,this.fetching=!0,e.matchWord&&(this.matchWord=e.matchWord),this.documentService.fetchPages(this.route.snapshot.params.documentId,e,0,e.filters.length?-1:ue).subscribe(i=>{this.fetching=!1,this.pageIds=[],i.forEach(n=>{this.pageIds.push(n.id);}),this.totalPages=this.pageIds.length,this.availablePages=i,this.pagesToShow=this.availablePages,this.changeDetector.detectChanges(),!e.filters.length&&ue>-1&&this.documentService.fetchPages(this.route.snapshot.params.documentId,e,ue,-1).subscribe(n=>{n.forEach(r=>{this.pageIds.push(r.id);}),this.totalPages=this.pageIds.length,this.availablePages=this.availablePages.concat(n),requestAnimationFrame(()=>{this.pagesToShow=this.availablePages;});});});}showPageDetails(e){this.router.navigate(["./"],{fragment:e.id.toString(),relativeTo:this.route});}fetchDocument(){this.documentDeleted||this.documentService.fetchDocumentById(this.route.snapshot.params.documentId).subscribe(e=>{if(!e&&parseInt(this.route.snapshot.params.documentId,10)===0&&(e={caseId:parseInt(this.route.snapshot.params.caseId,10),id:0,pages:[],creationDate:new Date().toString(),fileSize:0,pageCount:0,originalName:"",uniformRatio:!1,searchMatches:[],processed:!0}),this.document=e,this.document){let i=this.socket.fromEvent("documentDeleted-"+e.id).subscribe(()=>{this.documentDeleted=!0,setTimeout(()=>{this.router.navigate(["/cases/"+this.document.caseId],{replaceUrl:!0});},4500);});this.subscriptionStorage.add("subScreenPagesOverview",i);}});}updateVirtualScrollItemsInViewport(e,i){e.length&&(this.virtualScroller=i,clearTimeout(this.delayedVirtualScrollIndexUpdate),!this.virtualScrollLockViewportItemUpdate&&(this.delayedVirtualScrollIndexUpdate=setTimeout(()=>{this.virtualScrollLockViewportItemUpdate||(this.virtualScrollIndexOfItemInFocus=this.pagesToShow.indexOf(e[0])||0);},1500)));}showResultDistribution(){this.resultDistribution=!0;}trackByFunction(e,i){return i.filename;}handleScrollEvent(){let i=this.el.nativeElement.querySelector("#scroller").scrollTop,n=this.el.nativeElement.querySelector("#scroller").scrollHeight;!this.listCompleted&&i/n>.75&&(this.addPortion(),this.availablePages.length===0&&(this.listCompleted=!0));}addPortion(e=ue){this.pagesToShow=this.pagesToShow.concat(this.availablePages.splice(0,e)),this.availablePages.length>0&&(this.portioning=setTimeout(()=>{this.addPortion(4);},300));}syncPages(e,i){!this.currentFilterSettings&&this.initialFilter&&(this.currentFilterSettings={filters:[this.initialFilter],operator:"and"}),this.documentService.fetchPages(this.route.snapshot.params.documentId,this.currentFilterSettings).subscribe(n=>{if(!n)return;let r=n.map(_=>_.id);e&&i&&!r.includes(e)&&this.router.navigate(["./"],{fragment:r[i].toString(),relativeTo:this.route,replaceUrl:!0});let s=[];this.pageIds=s.concat(r);let a={},l={},c={};this.pagesToShow=this.pagesToShow.filter(_=>{let h=r.indexOf(_.id);return h===-1?!1:(r.splice(h,1),!0);}),this.availablePages=this.availablePages.filter(_=>{let h=r.indexOf(_.id);return h===-1?!1:(r.splice(h,1),!0);}),r.forEach(_=>{let h;n.some((g,f)=>{if(g.id!==_)return!1;if(h=f,this.pagesToShow.length<h){let M=h-this.pagesToShow.length;this.pagesToShow.splice(M,0,g);}else this.pagesToShow.splice(h,0,g);return!0;});}),this.availablePages.forEach((_,h)=>{a[_.id]=h;}),this.pagesToShow.forEach((_,h)=>{l[_.id]=h;}),n.forEach((_,h)=>{c[_.id]=h;});for(let _ in c){let h=c[_],g=n[h];isNaN(a[_])?isNaN(l[_])||(this.pagesToShow[l[_]].words=g.words,this.pagesToShow[l[_]].searchMatches=g.searchMatches,this.pagesToShow[l[_]].noteCount=g.noteCount,this.pagesToShow[l[_]].words.forEach(f=>{delete f.hasAttention;})):(this.availablePages[a[_]].words=g.words,this.availablePages[a[_]].searchMatches=g.searchMatches,this.availablePages[a[_]].noteCount=g.noteCount);}});}static ɵfac=function(i){return new(i||t)();};static ɵcmp=U({type:t,selectors:[["rw-sub-screen-pages-overview"]],hostAttrs:[1,"overflow-scroll"],hostBindings:function(i,n){i&1&&m("keydown.escape",function(s){return n.close(s);},!1,F)("keydown.d",function(s){return n.openDistribution(s);},!1,F)("resize",function(s){return n.fitImage(s);},!1,F);},decls:1,vars:1,consts:()=>{let e;e="Close document (ESC)";let i;i="Pages";let n;n="This case was deleted in another window. The case overview is now being opened...";let r;r="This document was deleted in another window. The detail view of this case is now being opened..";let s;s="One moment. The pages are being filtered.";let a;a="No matching pages found";let l;return l="Create page note(s)",[["measurementObject",""],["scrollableItems",""],i,n,r,s,a,["header",""],[1,"transition-all","duration-75","flex-grow","pl-3","capitalize","text-base","sm:text-lg","md:text-2xl"],[1,"block","sm:inline","text-slate-400","dark:text-indigo-500","font-mono","text-sm","sm:text-base","md:text-lg"],["title",e,"icon","x-lg","styling","standard_outline",1,"mr-3",3,"routerLink"],["context","",1,"overflow-hidden","z-10","transition-all","delay-200","duration-1000"],[1,"grow",3,"iaLayer","disabled","searchMatches","initialFilter","resultsFound"],["main",""],[3,"showCancelBtn","showConfirmBtn","type"],[3,"page"],[3,"document"],["aria-labelledby","primary-heading",1,"min-w-0","flex-1","h-full","flex","flex-col","lg:order-last"],[1,"h-screen","flex","items-center"],[3,"pageToAttachNote","page","caseId","documentPageIds"],[1,"opacity-0","w-full","h-full","pointer-events-none"],[1,"h-full","w-full","overflow-x-hidden",3,"items","bufferAmount"],[1,"hidden","sm:inline"],[1,"grow",3,"filterSettingsChanged","showResultDistribution","iaLayer","disabled","searchMatches","initialFilter","resultsFound"],[1,"text-lg"],[3,"closeNotes","page"],[3,"closed","document"],[1,"grow","text-center"],[1,"scale-[2.5]","inline-block","text-slate-300","dark:text-indigo-900","text-opacity-75","bi","bi-binoculars","text-2xl","animate-pulse"],[1,"inline-block","mt-6","text-xl","text-slate-400","dark:text-indigo-600"],[1,"scaleUp","inline-block","text-slate-300","dark:text-indigo-900","text-opacity-75","bi","bi-exclamation-circle","text-2xl"],[3,"dimensionChanged","allowSetHighlight","page","highlightSearchMatches","index","showContext"],[1,"text-xs","-mt-5","relative","pointer-events-none"],[1,"text-black","pointer-events-none","text-center","px-1","border","border-black","rounded-lg","bg-white","bg-opacity-70","border-opacity-20"],["icon","pencil-square","styling","standard_outline",1,"scale-75","block","pointer-events-auto"],[1,"h-full","w-full","overflow-x-hidden",3,"vsUpdate","items","bufferAmount"],[3,"allowSetHighlight","isNewDocument","page","highlightSearchMatches","index","showContext"],[3,"clicked","allowSetHighlight","isNewDocument","page","highlightSearchMatches","index","showContext"],[1,"text-black","pointer-events-none","text-center","px-1","mb-0.5","inline-block","border","border-black","rounded-lg","bg-white","bg-opacity-70","border-opacity-20"],["title",l,"icon","pencil-square","styling","standard_outline",1,"scale-75","block","pointer-events-auto",3,"clicked","hint"]];},template:function(i,n){i&1&&N(0,zt,19,23,"rw-page"),i&2&&T(n.document?0:-1);},dependencies:[ze,q,ce,Je,He,Ze,Xe,rt,qe,nt,it],encapsulation:2});}return t;})();export{nt as a,rt as b,Yi as c};/**i18n:1964dde12af7df15d0053ab7761c4e4c56fe7eae085ef9e01bc7588ce5d2189d*/