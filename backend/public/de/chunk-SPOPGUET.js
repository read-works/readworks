import{a as d}from"./chunk-O2ZDC4GV.js";import{a as h}from"./chunk-5ESBBNVT.js";import{_a as s,g as n,hb as a,s as c,w as o}from"./chunk-V52KVE3Z.js";var $=(()=>{class i{http=o(a);documentService=o(d);socket=o(h);cases=[];removedIds=[];relevantChange=new n;error=new n;constructor(){this.socket.on("casesHaveChanged",()=>{this.loadAllCases()})}loadAllCases(){this.http.get(`${s.api}case`).subscribe(t=>{this.cases=t.filter(e=>!this.removedIds.includes(e.id)),this.relevantChange.next(this.cases)})}subscribeToRelevantChanges(){return this.relevantChange}subscribeToCaseError(){return this.error}fetchById(t){return this.http.get(`${s.api}case/${t.toString()}`)}fetchDocuments(t){let e=this.documentService.getFilter(),r="?";return e?.searchForName&&(r+=`name=${e.searchForName}&`),e?.sortByType&&(r+=`sortBy=${e.sortByType}&`),e?.sortDirection&&(r+=`direction=${e.sortDirection}`),this.http.get(`${s.api}case/${t.toString()}/documents${r}`)}fetchSearches(t,e="ASC"){let r=e==="DESC"?"?order=desc":"";return this.http.get(`${s.api}case/${t.toString()}/searches${r}`)}create(t){let e={title:t};this.http.post(`${s.api}case`,e).subscribe(r=>{r.error?this.error.next(r):this.loadAllCases()})}delete(t){this.cases.some((e,r)=>(e.id===t&&(this.removedIds.push(t),this.cases.splice(r,1),this.relevantChange.next(this.cases)),e.id===t)),this.http.delete(`${s.api}case/${t}`).subscribe()}destroyCaches(){this.cases=[],this.removedIds=[]}static \u0275fac=function(e){return new(e||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{$ as a};
/**i18n:1964dde12af7df15d0053ab7761c4e4c56fe7eae085ef9e01bc7588ce5d2189d*/
